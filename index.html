<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | AI Tools Navigator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    .dashboard-gradient {
      background: linear-gradient(135deg, #9b87f5 0%, #6E59A5 100%);
    }
    .sidebar {
      background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
    }
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    .toast.show {
      transform: translateX(0);
    }
    .tool-card {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .tool-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <div class="flex min-h-screen">
    <!-- Mobile sidebar toggle -->
    <div class="fixed top-4 left-4 z-50 md:hidden">
      <button id="sidebarToggle" class="h-10 w-10 rounded-full bg-white shadow-md border border-gray-200 flex items-center justify-center">
        <i data-lucide="menu" class="h-5 w-5"></i>
      </button>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="fixed md:sticky top-0 left-0 z-40 h-screen w-64 transform transition-transform duration-300 ease-in-out sidebar text-white flex flex-col -translate-x-full md:translate-x-0">
      <!-- Logo area -->
      <div class="px-6 py-8">
        <h1 id="userName" class="text-2xl font-bold text-white">User Dashboard</h1>
        <p id="userPlan" class="text-sm text-white/70 mt-1">Starter Plan</p>
      </div>

      <!-- Navigation links -->
      <div class="flex-1 px-4 py-6">
        <nav class="space-y-2">
          <a href="index.html" class="w-full flex items-center px-4 py-6 text-lg bg-slate-700 text-white rounded-md">
            <i data-lucide="home" class="mr-4 h-5 w-5"></i>
            Home
          </a>
          <a href="analytics.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
            <i data-lucide="bar-chart-2" class="mr-4 h-5 w-5"></i>
            Analytics
          </a>
          <a href="ads.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
            <i data-lucide="megaphone" class="mr-4 h-5 w-5"></i>
            Ads
          </a>
          <a href="support.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
            <i data-lucide="help-circle" class="mr-4 h-5 w-5"></i>
            Support
          </a>
        </nav>
      </div>

      <!-- Settings and Sign out buttons -->
      <div class="px-4 py-6 border-t border-slate-600">
        <a href="settings.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors mb-2">
          <i data-lucide="settings" class="mr-4 h-5 w-5"></i>
          Settings
        </a>
        <button id="signOutBtn" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
          <i data-lucide="log-out" class="mr-4 h-5 w-5"></i>
          Sign Out
        </button>
      </div>
    </div>

    <!-- Main content area -->
    <div class="flex-1 p-6 md:p-10">
      <div class="max-w-7xl mx-auto space-y-8">
        <div>
          <h1 class="text-3xl font-bold mb-2">Dashboard</h1>
          <p class="text-gray-600">
            Welcome to the AI Tools Dashboard. Add and manage tools for your website.
          </p>
        </div>
        
        <!-- Add Tool Form -->
        <div class="bg-white rounded-lg shadow border border-gray-200">
          <div class="px-6 py-4 border-b border-gray-200">
            <h2 class="text-2xl font-bold">Add New AI Tool</h2>
          </div>
          <div class="p-6">
            <form id="addToolForm" class="space-y-6">
              <div class="space-y-2">
                <label for="toolName" class="block text-sm font-medium">Tool Name *</label>
                <input id="toolName" name="name" class="flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="Enter tool name" required>
              </div>

              <div class="space-y-2">
                <label for="toolDescription" class="block text-sm font-medium">Tool Description *</label>
                <textarea id="toolDescription" name="description" rows="4" class="flex w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="Describe what this tool does" required></textarea>
              </div>

              <div class="space-y-2">
                <label for="toolLink" class="block text-sm font-medium">Tool Link *</label>
                <input id="toolLink" name="link" type="url" class="flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="https://example.com" required>
              </div>

              <div class="space-y-2">
                <label for="toolImage" class="block text-sm font-medium">Tool Image</label>
                <input id="toolImage" name="image" type="file" accept="image/*" class="flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                <div id="imagePreview" class="mt-4 hidden">
                  <p class="text-sm font-medium mb-2">Preview:</p>
                  <div class="relative w-40 h-40 overflow-hidden rounded-md">
                    <img id="previewImg" class="w-full h-full object-cover" alt="Preview">
                  </div>
                </div>
              </div>

              <button type="submit" class="w-full dashboard-gradient text-white py-2 px-4 rounded-md font-medium hover:opacity-90 transition-opacity">
                Submit Tool
              </button>
            </form>
          </div>
        </div>
        
        <!-- Manage Tools Section -->
        <div class="pb-10">
          <h2 class="text-2xl font-semibold mb-6">Manage Tools</h2>
          
          <!-- Tools Tabs -->
          <div class="bg-white rounded-lg shadow border border-gray-200">
            <div class="border-b border-gray-200">
              <nav class="flex space-x-8 px-6" aria-label="Tabs">
                <button id="pendingTab" class="border-b-2 border-purple-500 py-4 px-1 text-sm font-medium text-purple-600">
                  Pending Review (<span id="pendingCount">0</span>)
                </button>
                <button id="approvedTab" class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
                  Approved (<span id="approvedCount">0</span>)
                </button>
              </nav>
            </div>
            
            <div class="p-6">
              <div id="pendingTools" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Pending tools will be inserted here -->
              </div>
              
              <div id="approvedTools" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
                <!-- Approved tools will be inserted here -->
              </div>
              
              <div id="noToolsMessage" class="text-center py-8">
                <p class="text-gray-500">No pending tools to review.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast notification -->
  <div id="toast" class="toast">
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <i data-lucide="check-circle" class="h-5 w-5 text-green-400"></i>
      </div>
      <div class="ml-3">
        <p id="toastMessage" class="text-sm font-medium text-gray-900"></p>
      </div>
    </div>
  </div>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // State management
    let tools = JSON.parse(localStorage.getItem('tools') || '[]');
    let currentTab = 'pending';

    // DOM Elements
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const addToolForm = document.getElementById('addToolForm');
    const toolImage = document.getElementById('toolImage');
    const imagePreview = document.getElementById('imagePreview');
    const previewImg = document.getElementById('previewImg');
    const pendingTab = document.getElementById('pendingTab');
    const approvedTab = document.getElementById('approvedTab');
    const pendingTools = document.getElementById('pendingTools');
    const approvedTools = document.getElementById('approvedTools');
    const noToolsMessage = document.getElementById('noToolsMessage');
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');

    // Sidebar toggle
    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('-translate-x-full');
    });

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', (e) => {
      if (window.innerWidth < 768 && !sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
        sidebar.classList.add('-translate-x-full');
      }
    });

    // Image preview
    toolImage.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          previewImg.src = e.target.result;
          imagePreview.classList.remove('hidden');
        };
        reader.readAsDataURL(file);
      } else {
        imagePreview.classList.add('hidden');
      }
    });

    // Form submission
    addToolForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const newTool = {
        id: Date.now().toString(),
        name: formData.get('name'),
        description: formData.get('description'),
        link: formData.get('link'),
        imageUrl: previewImg.src || 'https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=500&auto=format&fit=crop&q=60',
        status: 'pending',
        createdAt: new Date().toISOString()
      };
      
      tools.push(newTool);
      localStorage.setItem('tools', JSON.stringify(tools));
      
      // Reset form
      e.target.reset();
      imagePreview.classList.add('hidden');
      
      showToast('Tool submitted successfully! It will be reviewed shortly.');
      renderTools();
    });

    // Tab switching
    pendingTab.addEventListener('click', () => {
      currentTab = 'pending';
      updateTabs();
      renderTools();
    });

    approvedTab.addEventListener('click', () => {
      currentTab = 'approved';
      updateTabs();
      renderTools();
    });

    function updateTabs() {
      if (currentTab === 'pending') {
        pendingTab.classList.add('border-purple-500', 'text-purple-600');
        pendingTab.classList.remove('border-transparent', 'text-gray-500');
        approvedTab.classList.add('border-transparent', 'text-gray-500');
        approvedTab.classList.remove('border-purple-500', 'text-purple-600');
        pendingTools.classList.remove('hidden');
        approvedTools.classList.add('hidden');
      } else {
        approvedTab.classList.add('border-purple-500', 'text-purple-600');
        approvedTab.classList.remove('border-transparent', 'text-gray-500');
        pendingTab.classList.add('border-transparent', 'text-gray-500');
        pendingTab.classList.remove('border-purple-500', 'text-purple-600');
        approvedTools.classList.remove('hidden');
        pendingTools.classList.add('hidden');
      }
    }

    function renderTools() {
      const pendingToolsData = tools.filter(tool => tool.status === 'pending');
      const approvedToolsData = tools.filter(tool => tool.status === 'approved');
      
      document.getElementById('pendingCount').textContent = pendingToolsData.length;
      document.getElementById('approvedCount').textContent = approvedToolsData.length;
      
      // Render pending tools
      if (pendingToolsData.length === 0) {
        pendingTools.innerHTML = '';
        if (currentTab === 'pending') {
          noToolsMessage.classList.remove('hidden');
        }
      } else {
        noToolsMessage.classList.add('hidden');
        pendingTools.innerHTML = pendingToolsData.map(tool => createToolCard(tool)).join('');
      }
      
      // Render approved tools
      if (approvedToolsData.length === 0) {
        approvedTools.innerHTML = '';
        if (currentTab === 'approved') {
          noToolsMessage.classList.remove('hidden');
          noToolsMessage.querySelector('p').textContent = 'No approved tools yet.';
        }
      } else {
        if (currentTab === 'approved') {
          noToolsMessage.classList.add('hidden');
        }
        approvedTools.innerHTML = approvedToolsData.map(tool => createToolCard(tool)).join('');
      }
    }

    function createToolCard(tool) {
      return `
        <div class="bg-white rounded-lg shadow border border-gray-200 overflow-hidden tool-card">
          <div class="relative h-48 w-full">
            <img src="${tool.imageUrl}" alt="${tool.name}" class="w-full h-full object-cover">
          </div>
          <div class="p-4">
            <h3 class="font-bold text-lg mb-1">${tool.name}</h3>
            <p class="text-gray-600 text-sm mb-3">${tool.description}</p>
            <a href="${tool.link}" target="_blank" rel="noopener noreferrer" class="text-purple-600 hover:underline text-sm inline-block mb-3">
              Visit Tool
            </a>
            ${tool.status === 'pending' ? `
              <div class="flex space-x-2 mt-2">
                <button onclick="deleteTool('${tool.id}')" class="flex-1 border border-red-500 text-red-500 hover:bg-red-50 rounded-md px-3 py-2 text-sm font-medium transition-colors">
                  <i data-lucide="trash-2" class="h-4 w-4 mr-1 inline"></i> Delete
                </button>
              </div>
            ` : ''}
          </div>
        </div>
      `;
    }

    function deleteTool(id) {
      if (confirm('Are you sure you want to delete this tool?')) {
        tools = tools.filter(tool => tool.id !== id);
        localStorage.setItem('tools', JSON.stringify(tools));
        showToast('Tool deleted successfully');
        renderTools();
        lucide.createIcons(); // Re-initialize icons
      }
    }

    function showToast(message) {
      toastMessage.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Initialize
    renderTools();

    // Load user data
    const userData = JSON.parse(localStorage.getItem('userData') || '{"name": "User Dashboard", "plan": "starter"}');
    document.getElementById('userName').textContent = userData.name;
    document.getElementById('userPlan').textContent = userData.plan.charAt(0).toUpperCase() + userData.plan.slice(1) + ' Plan';

    // Sign out
    document.getElementById('signOutBtn').addEventListener('click', () => {
      if (confirm('Are you sure you want to sign out?')) {
        localStorage.removeItem('userData');
        window.location.href = 'user-panel.html';
      }
    });
  </script>
</body>
</html>
