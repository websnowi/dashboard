<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ads | AI Tools Navigator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
    .sidebar {
      background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
    }
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    .toast.show {
      transform: translateX(0);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <div class="flex min-h-screen">
    <!-- Mobile sidebar toggle -->
    <div class="fixed top-4 left-4 z-50 md:hidden">
      <button id="sidebarToggle" class="h-10 w-10 rounded-full bg-white shadow-md border border-gray-200 flex items-center justify-center">
        <i data-lucide="menu" class="h-5 w-5"></i>
      </button>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="fixed md:sticky top-0 left-0 z-40 h-screen w-64 transform transition-transform duration-300 ease-in-out sidebar text-white flex flex-col -translate-x-full md:translate-x-0">
      <!-- Logo area -->
      <div class="px-6 py-8">
        <h1 id="userName" class="text-2xl font-bold text-white">User Dashboard</h1>
        <p id="userPlan" class="text-sm text-white/70 mt-1">Starter Plan</p>
      </div>

      <!-- Navigation links -->
      <div class="flex-1 px-4 py-6">
        <nav class="space-y-2">
          <a href="index.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
            <i data-lucide="home" class="mr-4 h-5 w-5"></i>
            Home
          </a>
          <a href="analytics.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
            <i data-lucide="bar-chart-2" class="mr-4 h-5 w-5"></i>
            Analytics
          </a>
          <a href="ads.html" class="w-full flex items-center px-4 py-6 text-lg bg-slate-700 text-white rounded-md">
            <i data-lucide="megaphone" class="mr-4 h-5 w-5"></i>
            Ads
          </a>
          <a href="support.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
            <i data-lucide="help-circle" class="mr-4 h-5 w-5"></i>
            Support
          </a>
        </nav>
      </div>

      <!-- Settings and Sign out buttons -->
      <div class="px-4 py-6 border-t border-slate-600">
        <a href="settings.html" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors mb-2">
          <i data-lucide="settings" class="mr-4 h-5 w-5"></i>
          Settings
        </a>
        <button id="signOutBtn" class="w-full flex items-center px-4 py-6 text-lg hover:bg-slate-700 text-white/80 hover:text-white rounded-md transition-colors">
          <i data-lucide="log-out" class="mr-4 h-5 w-5"></i>
          Sign Out
        </button>
      </div>
    </div>

    <!-- Main content area -->
    <div class="flex-1 p-6 md:p-10">
      <div class="max-w-7xl mx-auto space-y-8">
        <div>
          <h1 class="text-3xl font-bold mb-2">Advertising Options</h1>
          <p class="text-gray-600">
            Promote your AI tools on our website with various advertising options.
          </p>
        </div>
        
        <!-- Tool Selection -->
        <div class="bg-white rounded-lg shadow border border-gray-200">
          <div class="px-6 py-4 border-b border-gray-200">
            <h2 class="text-xl font-bold flex items-center gap-2">
              Select Your Tool
            </h2>
            <p class="text-sm text-gray-600 mt-1">
              Choose which of your approved tools you want to advertise
            </p>
          </div>
          <div class="p-6">
            <div id="toolSelection" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
              <!-- Tool selection buttons will be inserted here -->
            </div>
            
            <div id="noApprovedTools" class="text-center py-4 text-gray-500 hidden">
              You don't have any approved tools yet. Get your tools approved first.
            </div>
          </div>
        </div>
        
        <!-- Advertising Tabs -->
        <div class="bg-white rounded-lg shadow border border-gray-200">
          <div class="border-b border-gray-200">
            <nav class="flex space-x-8 px-6" aria-label="Tabs">
              <button id="premiumTab" class="border-b-2 border-purple-500 py-4 px-1 text-sm font-medium text-purple-600">
                Premium Positions
              </button>
              <button id="homepageTab" class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
                Homepage Positions
              </button>
            </nav>
          </div>
          
          <div class="p-6">
            <!-- Premium Positions Tab -->
            <div id="premiumContent" class="space-y-6">
              <!-- Header Banner -->
              <div class="bg-white border border-gray-200 rounded-lg">
                <div class="px-6 py-4 border-b border-gray-200">
                  <h3 class="text-lg font-bold flex items-center gap-2">
                    Header Banner
                    <button class="h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center" title="Your tool will appear as a prominent banner at the top of our main website, receiving maximum visibility.">
                      <i data-lucide="info" class="h-4 w-4"></i>
                    </button>
                  </h3>
                </div>
                <div class="p-6">
                  <div id="headerBannerBid" class="text-sm text-gray-600 mb-3">No current bids</div>
                  <div class="flex gap-3">
                    <input id="headerBannerAmount" type="number" min="1" value="10" placeholder="Bid amount in $" class="w-32 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <button onclick="placeBid('headerBanner')" class="bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-700 transition-colors">
                      Place Bid
                    </button>
                  </div>
                </div>
              </div>
              
              <!-- Popup Ad -->
              <div class="bg-white border border-gray-200 rounded-lg">
                <div class="px-6 py-4 border-b border-gray-200">
                  <h3 class="text-lg font-bold flex items-center gap-2">
                    Popup Ad
                    <button class="h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center" title="Your tool will appear in a popup when users visit our website, ensuring they see your tool first.">
                      <i data-lucide="info" class="h-4 w-4"></i>
                    </button>
                  </h3>
                </div>
                <div class="p-6">
                  <div id="popupBid" class="text-sm text-gray-600 mb-3">No current bids</div>
                  <div class="flex gap-3">
                    <input id="popupAmount" type="number" min="1" value="5" placeholder="Bid amount in $" class="w-32 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <button onclick="placeBid('popup')" class="bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-700 transition-colors">
                      Place Bid
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Homepage Positions Tab -->
            <div id="homepageContent" class="hidden">
              <div class="bg-white border border-gray-200 rounded-lg">
                <div class="px-6 py-4 border-b border-gray-200">
                  <h3 class="text-lg font-bold flex items-center gap-2">
                    Homepage Tool Positions
                    <button class="h-6 w-6 rounded-full bg-gray-100 flex items-center justify-center" title="Your tool will be featured in one of the top positions on our homepage. Position 1 is the most prominent.">
                      <i data-lucide="info" class="h-4 w-4"></i>
                    </button>
                  </h3>
                  <p class="text-sm text-gray-600 mt-1">
                    Bid to secure a top position for your tool on our homepage
                  </p>
                </div>
                <div class="p-6">
                  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Position cards will be generated by JavaScript -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast notification -->
  <div id="toast" class="toast">
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <i data-lucide="check-circle" class="h-5 w-5 text-green-400"></i>
      </div>
      <div class="ml-3">
        <p id="toastMessage" class="text-sm font-medium text-gray-900"></p>
      </div>
    </div>
  </div>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // State management
    let tools = JSON.parse(localStorage.getItem('tools') || '[]');
    let userData = JSON.parse(localStorage.getItem('userData') || '{"name": "User Dashboard", "plan": "starter"}');
    let adBids = JSON.parse(localStorage.getItem('adBids') || '{}');
    let selectedToolId = null;
    let currentTab = 'premium';

    // DOM Elements
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const toolSelection = document.getElementById('toolSelection');
    const noApprovedTools = document.getElementById('noApprovedTools');
    const premiumTab = document.getElementById('premiumTab');
    const homepageTab = document.getElementById('homepageTab');
    const premiumContent = document.getElementById('premiumContent');
    const homepageContent = document.getElementById('homepageContent');
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');

    // Sidebar toggle
    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('-translate-x-full');
    });

    // Load user data
    document.getElementById('userName').textContent = userData.name;
    document.getElementById('userPlan').textContent = userData.plan.charAt(0).toUpperCase() + userData.plan.slice(1) + ' Plan';

    // Tab switching
    premiumTab.addEventListener('click', () => {
      currentTab = 'premium';
      updateTabs();
    });

    homepageTab.addEventListener('click', () => {
      currentTab = 'homepage';
      updateTabs();
    });

    function updateTabs() {
      if (currentTab === 'premium') {
        premiumTab.classList.add('border-purple-500', 'text-purple-600');
        premiumTab.classList.remove('border-transparent', 'text-gray-500');
        homepageTab.classList.add('border-transparent', 'text-gray-500');
        homepageTab.classList.remove('border-purple-500', 'text-purple-600');
        premiumContent.classList.remove('hidden');
        homepageContent.classList.add('hidden');
      } else {
        homepageTab.classList.add('border-purple-500', 'text-purple-600');
        homepageTab.classList.remove('border-transparent', 'text-gray-500');
        premiumTab.classList.add('border-transparent', 'text-gray-500');
        premiumTab.classList.remove('border-purple-500', 'text-purple-600');
        homepageContent.classList.remove('hidden');
        premiumContent.classList.add('hidden');
      }
    }

    // Populate approved tools
    function populateApprovedTools() {
      const approvedTools = tools.filter(tool => tool.status === 'approved');
      
      if (approvedTools.length === 0) {
        toolSelection.classList.add('hidden');
        noApprovedTools.classList.remove('hidden');
        return;
      }

      toolSelection.classList.remove('hidden');
      noApprovedTools.classList.add('hidden');

      toolSelection.innerHTML = approvedTools.map(tool => `
        <button onclick="selectTool('${tool.id}')" class="tool-btn h-auto py-2 px-3 justify-start border border-gray-300 rounded-md hover:bg-gray-50 transition-colors" data-tool-id="${tool.id}">
          <div class="flex items-center gap-2 w-full">
            <div class="w-8 h-8 overflow-hidden rounded-sm flex-shrink-0">
              <img src="${tool.imageUrl}" alt="${tool.name}" class="w-full h-full object-cover">
            </div>
            <span class="truncate">${tool.name}</span>
          </div>
        </button>
      `).join('');

      // Auto-select first tool
      if (approvedTools.length > 0) {
        selectTool(approvedTools[0].id);
      }
    }

    // Select tool
    function selectTool(toolId) {
      selectedToolId = toolId;
      
      // Update button styles
      document.querySelectorAll('.tool-btn').forEach(btn => {
        if (btn.dataset.toolId === toolId) {
          btn.classList.add('bg-purple-600', 'text-white');
          btn.classList.remove('border-gray-300', 'hover:bg-gray-50');
        } else {
          btn.classList.remove('bg-purple-600', 'text-white');
          btn.classList.add('border-gray-300', 'hover:bg-gray-50');
        }
      });

      updateBidDisplays();
      generateHomepagePositions();
    }

    // Update bid displays
    function updateBidDisplays() {
      // Header banner
      const headerBid = adBids.headerBanner;
      const headerDisplay = document.getElementById('headerBannerBid');
      if (headerBid) {
        const toolName = tools.find(t => t.id === headerBid.toolId)?.name || 'Unknown Tool';
        headerDisplay.textContent = `Current bid: $${headerBid.amount} by ${toolName}`;
        document.getElementById('headerBannerAmount').value = headerBid.amount + 1;
      } else {
        headerDisplay.textContent = 'No current bids';
        document.getElementById('headerBannerAmount').value = 10;
      }

      // Popup
      const popupBid = adBids.popup;
      const popupDisplay = document.getElementById('popupBid');
      if (popupBid) {
        const toolName = tools.find(t => t.id === popupBid.toolId)?.name || 'Unknown Tool';
        popupDisplay.textContent = `Current bid: $${popupBid.amount} by ${toolName}`;
        document.getElementById('popupAmount').value = popupBid.amount + 1;
      } else {
        popupDisplay.textContent = 'No current bids';
        document.getElementById('popupAmount').value = 5;
      }
    }

    // Generate homepage positions
    function generateHomepagePositions() {
      const container = homepageContent.querySelector('.grid');
      container.innerHTML = '';

      for (let i = 0; i < 6; i++) {
        const positionBid = adBids[`position_${i}`];
        let bidDisplay = 'No current bids';
        let minBid = 2;

        if (positionBid) {
          const toolName = tools.find(t => t.id === positionBid.toolId)?.name || 'Unknown Tool';
          bidDisplay = `Current bid: $${positionBid.amount} by ${toolName}`;
          minBid = positionBid.amount + 1;
        }

        container.innerHTML += `
          <div class="bg-white border border-gray-200 rounded-lg shadow-sm">
            <div class="px-4 py-3 border-b border-gray-200">
              <h4 class="text-lg font-bold">Position ${i + 1}</h4>
            </div>
            <div class="p-4">
              <div class="text-sm text-gray-600 mb-3">${bidDisplay}</div>
              <div class="flex gap-2 flex-wrap">
                <input id="position_${i}_amount" type="number" min="1" value="${minBid}" placeholder="Bid amount in $" class="w-24 rounded-md border border-gray-300 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500">
                <button onclick="placeBid('position', ${i})" class="bg-purple-600 text-white px-3 py-1 rounded-md text-sm font-medium hover:bg-purple-700 transition-colors">
                  Place Bid
                </button>
              </div>
            </div>
          </div>
        `;
      }
    }

    // Place bid
    function placeBid(type, position = null) {
      if (!selectedToolId) {
        showToast('Please select a tool first', 'error');
        return;
      }

      let amount;
      let bidKey;

      if (type === 'headerBanner') {
        amount = parseInt(document.getElementById('headerBannerAmount').value);
        bidKey = 'headerBanner';
      } else if (type === 'popup') {
        amount = parseInt(document.getElementById('popupAmount').value);
        bidKey = 'popup';
      } else if (type === 'position') {
        amount = parseInt(document.getElementById(`position_${position}_amount`).value);
        bidKey = `position_${position}`;
      }

      if (!amount || amount <= 0) {
        showToast('Bid amount must be greater than 0', 'error');
        return;
      }

      // Place the bid
      adBids[bidKey] = {
        toolId: selectedToolId,
        amount: amount,
        timestamp: new Date().toISOString()
      };

      localStorage.setItem('adBids', JSON.stringify(adBids));

      let message;
      if (type === 'headerBanner') {
        message = 'Header banner bid placed successfully!';
      } else if (type === 'popup') {
        message = 'Popup ad bid placed successfully!';
      } else {
        message = `Homepage position ${position + 1} bid placed successfully!`;
      }

      showToast(message, 'success');
      updateBidDisplays();
      generateHomepagePositions();
    }

    // Show toast
    function showToast(message, type = 'success') {
      toastMessage.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Initialize
    populateApprovedTools();
    updateBidDisplays();
    generateHomepagePositions();

    // Sign out
    document.getElementById('signOutBtn').addEventListener('click', () => {
      if (confirm('Are you sure you want to sign out?')) {
        localStorage.removeItem('userData');
        window.location.href = 'user-panel.html';
      }
    });

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', (e) => {
      if (window.innerWidth < 768 && !sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
        sidebar.classList.add('-translate-x-full');
      }
    });
  </script>
</body>
</html>
